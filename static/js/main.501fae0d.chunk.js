(this["webpackJsonpto-do-app-frontend"]=this["webpackJsonpto-do-app-frontend"]||[]).push([[0],{229:function(e,t,a){e.exports=a(412)},234:function(e,t,a){},412:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(33),c=a.n(r),s=(a(234),a(12)),l=a(14),i=a(15),u=a(16),m=a(17),p=a(428),h=a(430),d=a(60),f=a(422),k=a(423),g=a(201),j=a(431),E=a(424),b=a(427),v=function e(t){var a=this;Object(s.a)(this,e),this.createUser=function(e){a.component.setState({loading:!a.component.state.loading}),fetch("".concat(a.workingURL,"/users"),{method:"POST",headers:{"content-type":"application/json",Accept:"application/json"},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){void 0!==e.errors&&null!==e.errors?a.component.setState({logErrors:e.errors},(function(){return a.component.setState({loading:!a.component.state.loading})})):(localStorage.token=e.token,localStorage.userId=e.user_id,a.component.setState({token:e.token,loggedInUserId:e.user_id,loggedIn:void 0!==e.token&&""!==e.token&&null!==e.token,logErrors:[]},(function(){return a.component.setState({loading:!a.component.state.loading})})))})).catch((function(e){a.component.setState({loading:!a.component.state.loading}),console.log(e)}))},this.login=function(e){a.component.setState({loading:!a.component.state.loading}),fetch("".concat(a.workingURL,"/login"),{method:"POST",headers:{"content-type":"application/json",Accept:"application/json"},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){void 0!==e.errors&&null!==e.errors?a.component.setState({logErrors:e.errors},(function(){return a.component.setState({loading:!a.component.state.loading})})):(localStorage.token=e.token,localStorage.userId=e.user_id,a.component.setState({token:e.token,loggedInUserId:e.user_id,loggedIn:void 0!==e.token&&""!==e.token&&null!==e.token,logErrors:[]},(function(){return a.component.setState({loading:!a.component.state.loading})})))})).catch((function(e){a.component.setState({loading:!a.component.state.loading}),console.log(e)}))},this.component=t,this.workingURL="https://arcane-sands-50858.herokuapp.com"},y=a(19),S=a(426),O=a(429),C=function(e,t,a){new v(a).login({username:e,password:t})},w=function(e){var t=e.parent,a=e.state,r=Object(n.useState)(""),c=Object(d.a)(r,2),s=c[0],l=c[1],i=Object(n.useState)(""),u=Object(d.a)(i,2),m=u[0],p=u[1],h=Object(n.useState)(!1),w=Object(d.a)(h,2),P=w[0],N=w[1],T=a.logErrors;return""!==localStorage.token&&void 0!==localStorage.token&&"undefined"!==localStorage.token?o.a.createElement(y.a,{to:"/"}):o.a.createElement(f.a,{className:"d-flex justify-content-center flex-column h-100"},o.a.createElement(k.a,{style:{justifyContent:"center"}},o.a.createElement(g.a,{sm:4,md:6,lg:6},o.a.createElement(j.a,{style:{margin:"auto",padding:"20px",marginTop:"50px"}},o.a.createElement(S.a,{as:"h4",style:{textAlign:"center",marginTop:5}},o.a.createElement(E.a,{variant:"primary",onClick:function(){return function(e){C("test_account1234","123456",e)}(t)},style:{backgroundColor:"#db3d44",borderColor:"#db3d44"}},"Log in with a Test Account"))))),o.a.createElement(k.a,{style:{justifyContent:"center"}},o.a.createElement(g.a,{sm:4,md:6,lg:6},o.a.createElement(j.a,{style:{margin:"auto",padding:"20px",marginTop:"30px"}},o.a.createElement(S.a,{as:"h4",style:{textAlign:"center",marginTop:5}},P?"Sign Up":"Sign In"," or ",o.a.createElement("span",{onClick:function(){return N(!P)}},o.a.createElement("u",null,P?"Sign In!":"Sign Up!"))),0===T.length||a.loading?null:o.a.createElement(O.a,{color:"red",list:T,header:"oops, something went wrong!"}),o.a.createElement("span",{style:{textAlign:"center"}},a.loading?"Loading...":null),o.a.createElement("div",{className:"d-flex flex-row w-100 h-100  flex-fill justify-content-center "},o.a.createElement(b.a,null,o.a.createElement(b.a.Group,{controlId:"formGroupEmail"},o.a.createElement(b.a.Label,null,"Username"),o.a.createElement(b.a.Control,{placeholder:"Username",value:s,onChange:function(e){return l(e.target.value)}})),o.a.createElement(b.a.Group,{controlId:"formGroupPassword"},o.a.createElement(b.a.Label,null,"Password"),o.a.createElement(b.a.Control,{type:"Password",placeholder:"Password",value:m,onChange:function(e){return p(e.target.value)}})))),o.a.createElement("div",{className:"w-50 d-flex align-self-center justify-content-end"},o.a.createElement(E.a,{size:"sm",style:{backgroundColor:"#db3d44",borderColor:"#db3d44"},onClick:function(e){return function(e,t,a,n){e?new v(n).createUser({username:t,password:a}):C(t,a,n)}(P,s,m,t)},variant:"primary"},P?"Create Account!":"Sign in!"))))))},P=a(21),N=a(211),T=a.n(N),I=a(425),x=a(108),M=a.n(x);a(199);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={show:a.props.show,project:{date:"",description:"",name:"",priority:""}},a.handleName=function(e){return a.setState({project:D({},a.state.project,{name:e})})},a.handleDesc=function(e){return a.setState({project:D({},a.state.project,{description:e})})},a.handleChange=function(e){return a.setState({project:D({},a.state.project,{date:e})})},a.handleSelectChange=function(e){return a.setState({project:D({},a.state.project,{priority:e})})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(I.a,{show:this.props.show},o.a.createElement(I.a.Header,null,o.a.createElement(I.a.Title,null,"Enter New Project Details")),o.a.createElement(I.a.Body,null,o.a.createElement(b.a,null,o.a.createElement(b.a.Group,{as:k.a,controlId:"formProName"},o.a.createElement(b.a.Label,{column:!0,sm:"2"},o.a.createElement("small",null,"Name:")),o.a.createElement(g.a,{sm:"10"},o.a.createElement(b.a.Control,{onChange:function(t){return e.handleName(t.target.value)},value:this.state.project.name}))),o.a.createElement(b.a.Group,{as:k.a,controlId:"formProDesc"},o.a.createElement(b.a.Label,{column:!0,sm:"2"},o.a.createElement("small",null,"Description:")),o.a.createElement(g.a,{sm:"10"},o.a.createElement(b.a.Control,{onChange:function(t){return e.handleDesc(t.target.value)},value:this.state.project.description}))),o.a.createElement(b.a.Group,{as:k.a,controlId:"formProPriority"},o.a.createElement(g.a,{sm:"2"},o.a.createElement(b.a.Label,null,o.a.createElement("small",null,"Priority:"))),o.a.createElement(g.a,{sm:"10"},o.a.createElement(b.a.Control,{as:"select",onChange:function(t){return e.handleSelectChange(t.target.value)}},o.a.createElement("option",{value:"low"},"Low"),o.a.createElement("option",{value:"medium"},"Medium"),o.a.createElement("option",{value:"high"},"High")))),o.a.createElement(b.a.Group,{as:k.a,controlId:"formProDeadline"},o.a.createElement(g.a,{sm:"2"},o.a.createElement(b.a.Label,null,o.a.createElement("small",null,"Deadline:"))),o.a.createElement(g.a,{sm:"10"},o.a.createElement(M.a,{selected:this.state.project.date,onChange:this.handleChange}))))),o.a.createElement(I.a.Footer,null,o.a.createElement(E.a,{size:"sm",variant:"secondary",onClick:this.props.handleModalClose},"Close"),o.a.createElement(E.a,{size:"sm",onClick:function(t){return e.props.handleProjectSubmit(e.state.project)},variant:"primary"},"Create Project")))}}]),t}(o.a.Component),A=a(432),U=function(e){var t=e.tasks,a=e.dateFromState,n=e.completeTask,r=t.filter((function(e){return new Date(e.deadline).setHours(0,0,0,0).valueOf()<=a.setHours(0,0,0,0).valueOf()}));return r=r.map((function(e){return e.spanText=new Date(e.deadline).setHours(0,0,0,0).valueOf()===a.setHours(0,0,0,0).valueOf()?"Due Today":"Past Due",e})),o.a.createElement("div",null,o.a.createElement(j.a,null,o.a.createElement(j.a.Header,{style:{backgroundColor:"#0033CC",color:"#fff"}},"Upcoming Tasks ",o.a.createElement("i",{className:"fa fa-fw fa-caret-up",style:{fontSize:"1em",marginLeft:5}})),r.map((function(e){return o.a.createElement(A.a.Item,{className:"d-flex",key:"list-group-item-".concat(e.id)},e.title,function(e,t,a){return"Due Today"===e?o.a.createElement("span",{className:"flex-fill text-right"},e,o.a.createElement("i",{onClick:function(){return t(a.id)},className:"fa fa-fw fa-check",style:{fontSize:"1.5em",color:"#d3d3d3",marginLeft:3}})):o.a.createElement("span",{className:"flex-fill text-right"},o.a.createElement("i",{style:{color:"red"}},e),o.a.createElement("i",{onClick:function(){return t(a.id)},className:"fa fa-fw fa-check",style:{fontSize:"1.5em",color:"#d3d3d3",marginLeft:3}}))}(e.spanText,n,e))})),0===r.length?o.a.createElement("h5",{style:{marginTop:5,alignSelf:"center"}},"No Upcoming Task!"):console.log(r)))},H=function(e){var t=e.tasks,a=(e.completeTask,new Date);a.setDate(a.getDate()-7);var n=t.filter((function(e){return e.is_completed&&new Date(e.deadline).valueOf()>a.setHours(0,0,0,0).valueOf()})).sort((function(e,t){return t.id-e.id})).slice(0,5);return o.a.createElement(j.a,{style:{width:"350px",maxWidth:"100%"}},o.a.createElement(j.a.Header,{style:{backgroundColor:"#669900",color:"#fff"}},"Recently Completed Tasks ",o.a.createElement("i",{className:"fa fa-fw fa-check-square-o",style:{fontSize:"1em",marginLeft:5}})),n.map((function(e,t){return o.a.createElement(A.a.Item,{key:"task-item-".concat(e.id)},o.a.createElement("div",{className:"float-left"},e.title),o.a.createElement("div",{className:"float-right"},o.a.createElement("i",{className:"fa fa-fw fa-check",style:{fontSize:"1.5em",color:"green"}})))})),0===n.length?o.a.createElement("h5",{style:{marginTop:5,alignSelf:"center"}},"No Completed Task!"):console.log())},F=a(50),R=function(e,t){return o.a.createElement("div",{className:"row mx-auto",key:"row-".concat(t),style:{marginTop:10}},e.map((function(e){return o.a.createElement(g.a,{key:"project-".concat(e.id),sm:4},o.a.createElement(F.b,{to:"/projects/".concat(e.id)},o.a.createElement(j.a,{key:"project-".concat(e.id)},o.a.createElement(j.a.Header,{style:{color:"#000000"}},e.name))))})))},_=function(e){var t=e.projects,a=e.openModal;return o.a.createElement(j.a,{className:"mb-3"},o.a.createElement(j.a.Header,{style:{backgroundColor:"#0099FF",color:"#fff"}},o.a.createElement("div",{className:"float-left"},"My Projects ",o.a.createElement("i",{className:"fa fa-fw fa-th-large",style:{fontSize:"1em",marginLeft:5}})),o.a.createElement("div",{className:"float-right",onClick:function(){return a()}},o.a.createElement("strong",null,"New"),o.a.createElement("i",{className:"fa fa-fw fa-plus-square",style:{fontSize:"1em",marginLeft:5}}))),o.a.createElement(j.a.Body,null,0===t.length?o.a.createElement("span",null,"You don't have any project, please create one by clicking ",o.a.createElement("span",{style:{textDecoration:"underline",fontWeight:"bold"},onClick:function(){return a()}},"here!")):function(e){return function(e){for(var t=[],a=0;a<e.length;a+=3)t.push(e.slice(a,a+3));return t}(e).map((function(e,t){return R(e,t)}))}(t)))};function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){return a.setState({date:e})},a.openModal=function(){return a.setState({showNPM:!0})},a.handleModalClose=function(){return a.setState({showNPM:!1})},a.allTasks=function(){return a.props.allTasks},a.handleProjectSubmit=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{userId:a.props.authProps.loggedInUserId});a.props.projectService.postProject(t),a.setState({showNPM:!1})},a.completeTask=function(e){return a.props.taskService.completeTask(e)},a.state={userId:1,showNPM:!1,date:new Date,inbox:[],trash:[],upcomingTasks:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(f.a,{fluid:!0},o.a.createElement(z,{handleProjectSubmit:this.handleProjectSubmit,show:this.state.showNPM,handleModalClose:this.handleModalClose}),o.a.createElement(k.a,null,o.a.createElement(g.a,{sm:3},o.a.createElement(T.a,{className:"mb-3",onChange:this.onChange,value:this.state.date})),o.a.createElement(g.a,{sm:6},o.a.createElement(_,{projects:this.props.projects,openModal:this.openModal}),o.a.createElement(U,{dateFromState:this.state.date,tasks:this.allTasks().filter((function(e){return!e.is_completed})),completeTask:this.completeTask})),o.a.createElement(g.a,{sm:3},o.a.createElement(H,{tasks:this.allTasks(),completeTask:this.completeTask}))))}}]),t}(o.a.Component),J=a(31),W=function(){function e(t){Object(s.a)(this,e),this.component=t,this.productionURL="https://arcane-sands-50858.herokuapp.com",this.devURL="http://localhost:3000"}return Object(l.a)(e,[{key:"fetchAll",value:function(e){var t=this;fetch("".concat(this.productionURL,"/tags")).then((function(e){return e.json()})).then((function(e){return t.component.setState({tags:e})}))}}]),e}(),q=function(e){var t=e.project,a=e.className,r=e.projectService,c=Object(n.useState)(!1),s=Object(d.a)(c,2),l=s[0],i=s[1],u=Object(n.useState)(t.name),m=Object(d.a)(u,2),p=m[0],h=m[1],f=Object(n.useState)(t.desc),E=Object(d.a)(f,2),v=E[0],y=E[1];return o.a.createElement(j.a,{className:a+" d-flex"},o.a.createElement(j.a.Header,{style:{backgroundColor:"#0099FF",color:"#fff"}},o.a.createElement(k.a,null,o.a.createElement(g.a,{sm:10,className:"my-auto"},l?o.a.createElement(b.a.Control,{value:p,placeholder:t.name,onChange:function(e){return h(e.target.value)}}):t.name),o.a.createElement(g.a,{sm:2,className:"text-right"},o.a.createElement("div",{variant:"light",onClick:function(){return l?function(e,t,a,n,o){n.updateProject(o.id,{name:t,description:a}),e(!1)}(i,p,v,r,t):i(!0)}},o.a.createElement("strong",null,l?"Done":"Edit"),o.a.createElement("i",{className:l?"fa fa-fw fa-check":"fa fa-fw fa-pencil",style:{fontSize:"1em",marginLeft:5}}))))),o.a.createElement(j.a.Body,null,l?o.a.createElement(b.a.Control,{value:v,placeholder:t.description,onChange:function(e){return y(e.target.value)}}):t.description))},V=a(39),Y=function e(t){var a=this;Object(s.a)(this,e),this.fetchNotesForProject=function(e){fetch("".concat(a.workingURL,"/projects/").concat(e,"/notes"),{headers:{Authorization:a.component.props.authProps.token}}).then((function(e){return e.json()})).then((function(e){return a.component.setState({notes:e})}))},this.createNote=function(e,t){fetch("".concat(a.workingURL,"/projects/").concat(t,"/notes"),{headers:{Authorization:a.component.props.authProps.token,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e),method:"POST"}).then((function(e){return e.json()})).then((function(e){a.component.setState({notes:[].concat(Object(V.a)(a.component.state.notes),[e])})}))},this.deleteNote=function(e){fetch("".concat(a.workingURL,"/notes/").concat(e),{method:"DELETE",headers:{Authorization:a.component.props.authProps.token,"content-type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=a.component.state.notes;a.component.setState({notes:t.filter((function(t){return t.id!==e.id}))})}))},this.component=t,this.workingURL="https://arcane-sands-50858.herokuapp.com"},$=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){a.noteService.createNote(e,a.props.project.id),a.openOrCloseModal()},a.openOrCloseModal=function(){return a.setState({isModalHidden:!a.state.isModalHidden})},a.renderForm=function(){return o.a.createElement(b.a,null,o.a.createElement(b.a.Group,{as:k.a,controlId:"formProName",className:"text-center"},o.a.createElement(g.a,{sm:"9"},o.a.createElement(b.a.Control,{as:"textarea",autoFocus:!0,onChange:function(e){return a.setState({text:e.target.value})},placeholder:"Enter text here...",value:a.state.text})),o.a.createElement(g.a,{sm:"3",className:"my-auto"},o.a.createElement(E.a,{onClick:function(e){return a.handleSubmit({note:{text:a.state.text}})},variant:"primary"},"Add Note"))))},a.state={isModalHidden:!1,notes:[],text:""},a.noteService=new Y(Object(J.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.noteService.fetchNotesForProject(this.props.project.id)}},{key:"render",value:function(){var e=this,t=this.props.className;return o.a.createElement(j.a,{className:t},o.a.createElement(j.a.Header,{style:{backgroundColor:"#990033",color:"#fff"}},"Notes ",o.a.createElement("i",{className:"fa fa-fw fa-pencil-square-o",style:{fontSize:"1em",marginLeft:5}}),o.a.createElement("div",{className:"float-right",onClick:this.openOrCloseModal},o.a.createElement("strong",null,this.state.isModalHidden?"Cancel":"New"),o.a.createElement("i",{className:"fa fa-fw fa-plus-square",style:{fontSize:"1em",marginLeft:5}}))),o.a.createElement(j.a.Body,null,this.state.isModalHidden?this.renderForm():null,this.state.notes.map((function(t){return o.a.createElement(A.a.Item,{className:"d-flex",key:"note-item-".concat(t.id),style:{border:"1px solid #d3d3d3"}},t.text,o.a.createElement("span",{className:"flex-fill text-right"},o.a.createElement("i",{className:"fa fa-fw fa-trash",style:{fontSize:"1.25em",color:"darkgray"},onClick:function(){return e.noteService.deleteNote(t.id)}})))}))))}}]),t}(n.Component),K=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).completeItem=function(e){a.props.itemService.completeItem(e,!a.props.item.is_completed,a.props.checklistId)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(j.a.Body,{key:"checklist-item".concat(this.props.item.id)},o.a.createElement(A.a.Item,{key:this.props.item.id},o.a.createElement("div",{className:"float-left"},o.a.createElement("i",{onClick:function(){return e.completeItem(e.props.item.id)},className:"fa fa-fw fa-check",style:{fontSize:"1.5em",color:this.props.item.is_completed?"green":"silver"}}),this.props.item.text),o.a.createElement("div",{className:"float-right"},o.a.createElement("i",{className:"fa fa-fw fa-trash",style:{fontSize:"1.25em",color:"darkGray"},onClick:function(){return e.props.deleteItem(e.props.item.id)}})),o.a.createElement("br",null))))}}]),t}(o.a.Component),Q=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).renderItems=function(){var t=Object(V.a)(e.props.checklist.items);return t.sort((function(e,t){return e.id-t.id})),t.map((function(t){return o.a.createElement(K,{checklistId:e.props.checklist.id,itemService:e.props.itemService,authProps:e.props.authProps,key:t.id,item:t,deleteItem:e.deleteItem})}))},e.handleChange=function(t){return e.setState(Object(P.a)({},t.target.name,t.target.value))},e.handleClick=function(){return e.setState({addItem:!e.state.addItem})},e.handleSubmit=function(t){t.preventDefault(),e.props.itemService.createNewItem(e.props.checklist.id,{text:e.state.text}),e.setState({addItem:!1,text:""})},e.deleteItem=function(t){e.props.itemService.deleteItem(t,e.props.checklist.id)},e.renderForm=function(){var t=e.state.title;return o.a.createElement(b.a,{className:"pt-1 pb-1 pl-2",onSubmit:e.handleSubmit},o.a.createElement(k.a,null,o.a.createElement(g.a,{sm:"7"},o.a.createElement(b.a.Control,{placeholder:"text",name:"text",value:t,onChange:e.handleChange})),o.a.createElement(g.a,{sm:"2"},o.a.createElement(E.a,{onClick:e.handleSubmit},"Submit")),o.a.createElement(g.a,{sm:"2"},o.a.createElement(E.a,{variant:"danger",onClick:function(){return e.setState({addItem:!1,text:""})}},"Cancel"))))},e.state={showItems:!1,addItem:!1,text:""},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{key:this.props.checklist.id,className:"mb-3"},o.a.createElement(j.a,null,o.a.createElement(j.a.Header,null,o.a.createElement(k.a,null,o.a.createElement(g.a,{sm:8},this.props.checklist.title),o.a.createElement(g.a,{sm:2},o.a.createElement(E.a,{size:"sm",onClick:function(){return e.setState({showItems:!e.state.showItems})}},"Expand")),o.a.createElement(g.a,{sm:2,className:"my-auto pt-1"},o.a.createElement("i",{onClick:function(t){return e.handleClick()},className:"fa fa-fw fa-plus-square align-self-center",style:{fontSize:"1.5em",marginLeft:5}})))),this.state.addItem?this.renderForm():null,this.state.showItems?this.renderItems():null))}}]),t}(o.a.Component),X=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={newList:!1,title:""},a.handleChange=function(e){return a.setState(Object(P.a)({},e.target.name,e.target.value))},a.handleClick=function(){return a.setState({newList:!a.state.newList})},a.handleSubmit=function(e){a.props.checklistService.createChecklist(a.props.task.id,{title:a.state.title}),a.setState({title:"",newList:!1})},a.renderForm=function(){var e=a.state.title;return o.a.createElement(b.a,{className:"pt-1 pb-4 pl-2"},o.a.createElement(k.a,null,o.a.createElement(g.a,{sm:"7"},o.a.createElement(b.a.Control,{placeholder:"title",name:"title",value:e,onChange:a.handleChange})),o.a.createElement(g.a,{sm:"2"},o.a.createElement(E.a,{onClick:a.handleSubmit},"Submit")),o.a.createElement(g.a,{sm:"2"},o.a.createElement(E.a,{variant:"danger",onClick:function(){return a.setState({newList:!1})}},"Cancel"))))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(I.a,{show:this.props.show},o.a.createElement(I.a.Header,null,o.a.createElement("div",{className:"float-left",style:{color:"black"}},this.props.task.title),o.a.createElement("div",{className:"float-right"},o.a.createElement("i",{onClick:function(t){return e.handleClick()},className:"fa fa-fw fa-plus-square",style:{fontSize:"1.5em",marginLeft:5}}),o.a.createElement("i",{onClick:function(){return e.props.closeModal()},className:"fa fa-fw fa-times-circle",style:{fontSize:"1.5em"}}))),o.a.createElement(I.a.Body,null,this.state.newList?this.renderForm():null,this.props.checklists.map((function(t){return o.a.createElement(Q,{authProps:e.props.authProps,itemService:e.props.itemService,checklist:t,key:t.id})}))))}}]),t}(o.a.Component),Z=function e(t){var a=this;Object(s.a)(this,e),this.fetchChecklists=function(e){fetch("https://arcane-sands-50858.herokuapp.com/tasks/".concat(e,"/checklists"),{headers:{Authorization:a.component.props.authProps.token}}).then((function(e){return e.json()})).then((function(e){a.component.setState({checklists:e})}))},this.createChecklist=function(e,t){fetch("https://arcane-sands-50858.herokuapp.com/tasks/".concat(e,"/checklists"),{method:"POST",headers:{Authorization:a.component.props.authProps.token,"content-type":"application/json",Accept:"application/json"},body:JSON.stringify({checklist:t})}).then((function(e){return e.json()})).then((function(e){a.component.setState({checklists:[].concat(Object(V.a)(a.component.state.checklists),[e])})}))},this.component=t},ee=function e(t){var a=this;Object(s.a)(this,e),this.createNewItem=function(e,t){fetch("https://arcane-sands-50858.herokuapp.com/checklists/".concat(e,"/items"),{method:"POST",headers:{Authorization:a.component.props.authProps.token,"content-type":"application/json",Accept:"application/json"},body:JSON.stringify({item:t})}).then((function(e){return e.json()})).then((function(t){var n=a.component.state.checklists.find((function(t){return t.id===e})),o=Object.assign({},n);o.items=[].concat(Object(V.a)(o.items),[t]),a.component.updateChecklistsWith(o)}))},this.completeItem=function(e,t,n){fetch("https://arcane-sands-50858.herokuapp.com/items/".concat(e),{method:"PATCH",headers:{Authorization:a.component.props.authProps.token,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({item:{is_completed:t}})}).then((function(e){return e.json()})).then((function(e){var t=a.component.state.checklists.find((function(e){return e.id===n})),o=Object.assign({},t);o.items=o.items.map((function(t){return e.id===t.id?e:t})),a.component.updateChecklistsWith(o)}))},this.deleteItem=function(e,t){fetch("https://arcane-sands-50858.herokuapp.com/items/".concat(e),{method:"DELETE",headers:{Authorization:a.component.props.authProps.token,"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){var n=a.component.state.checklists.find((function(e){return e.id===t})),o=Object.assign({},n);o.items=o.items.filter((function(t){return t.id!==e.id})),a.component.setState({checklists:a.component.state.checklists.map((function(e){return e.id===o.id?o:e}))})}))},this.component=t},te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).closeModal=function(){return a.setState({isModalHidden:!0})},a.updateChecklistsWith=function(e){a.setState({checklists:a.state.checklists.map((function(t){return t.id===e.id?e:t}))})},a.openModal=function(e){a.ChecklistService.fetchChecklists(e.id),a.setState({isModalHidden:!1,task:e})},a.state={isModalHidden:!0,task:{id:1},checklists:[]},a.ChecklistService=new Z(Object(J.a)(a)),a.itemService=new ee(Object(J.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return t!==this.state}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.tasks,r=t.openModal,c=t.style,s=t.completeTask;return o.a.createElement(j.a,{className:"mb-2"},o.a.createElement(X,{itemService:this.itemService,checklistService:this.ChecklistService,authProps:this.props.authProps,task:this.state.task,show:!this.state.isModalHidden,checklists:this.state.checklists,closeModal:this.closeModal}),o.a.createElement(j.a.Header,{style:c},o.a.createElement("div",{className:"float-left"},a," ",o.a.createElement("i",{className:"fa fa-fw fa-th",style:{fontSize:"1em",marginLeft:5}})),"Completed Tasks"!==a?o.a.createElement("div",{className:"float-right",onClick:r},o.a.createElement("strong",null,"New"),o.a.createElement("i",{className:"fa fa-fw fa-plus-square",style:{fontSize:"1em",marginLeft:5}})):null),o.a.createElement(j.a.Body,null,n.map((function(t){return o.a.createElement("div",{key:"task-item".concat(t.id)},o.a.createElement(A.a.Item,{key:"task-item-".concat(t.id),className:"d-flex"},o.a.createElement("span",{className:"flex-grow-1",onClick:function(){return e.openModal(t)}},t.title),o.a.createElement("span",null,"Upcoming Tasks"===a?o.a.createElement("i",{onClick:function(){return s(t.id)},className:"fa fa-fw fa-check",style:{fontSize:"1.5em",color:"#d3d3d3",marginLeft:3}}):null)))}))))}}]),t}(o.a.Component);function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(a),!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var oe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={date:new Date,task:{deadline:"",title:"",projectId:a.props.project?a.props.project.id:1}},a.handleTitle=function(e){return a.setState({task:ne({},a.state.task,{title:e})})},a.handleProjectSelect=function(e){return a.setState({task:ne({},a.state.task,{projectId:e})})},a.handleChange=function(e){a.setState({date:e})},a.handleSelectChange=function(e){return a.setState({task:ne({},a.state.task,{priority:e})})},a.handleSubmit=function(){var e=ne({},a.state.task);e.deadline=a.state.date.toUTCString(),a.props.handleTaskSubmit(e),a.setState({task:{deadline:"",title:"",projectId:a.props.project?a.props.project.id:1}},(function(){return a.props.closeModal()}))},a.renderSelect=function(){return o.a.createElement(b.a.Control,{as:"select",onChange:function(e){return a.handleProjectSelect(e.target.value)},defaultValue:a.state.task.projectId},a.props.projects.map((function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.name)})))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(I.a,{show:this.props.show},o.a.createElement(I.a.Header,null,o.a.createElement(I.a.Title,null,"New Task Form")),o.a.createElement(I.a.Body,null,o.a.createElement(b.a,null,o.a.createElement(b.a.Group,{as:k.a,controlId:"formProName"},o.a.createElement(b.a.Label,{column:!0,sm:"2"},o.a.createElement("small",null,"Title:")),o.a.createElement(g.a,{sm:"10"},o.a.createElement(b.a.Control,{onChange:function(t){return e.handleTitle(t.target.value)},defaultValue:this.state.task.title}))),o.a.createElement(b.a.Group,{as:k.a,controlId:"formProDesc"},o.a.createElement(b.a.Label,{column:!0,sm:"2"},o.a.createElement("small",null,"Description:")),o.a.createElement(g.a,{sm:"10"},this.props.projects?this.renderSelect():this.props.project.name)),o.a.createElement(b.a.Group,{as:k.a,controlId:"formProDeadline"},o.a.createElement(g.a,{sm:"2"},o.a.createElement(b.a.Label,null,o.a.createElement("small",null,"Deadline:"))),o.a.createElement(g.a,{sm:"10"},o.a.createElement(M.a,{selected:this.state.date,onChange:this.handleChange}))))),o.a.createElement(I.a.Footer,null,o.a.createElement(E.a,{size:"sm",variant:"secondary",onClick:this.props.closeModal},"Close"),o.a.createElement(E.a,{size:"sm",onClick:function(t){return e.handleSubmit()},variant:"primary"},"Create New Task")))}}]),t}(o.a.Component);function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this))).openOrCloseModal=function(){return a.setState({showNTM:!a.state.showNTM})},a.completeTask=function(e){a.props.taskService.completeTask(e)},a.handleProjectSubmit=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{userId:a.props.authProps.loggedInUserId});a.props.projectService.postProject(t),a.setState({showNPM:!1})},a.handleModalClose=function(){return a.setState({showNPM:!1})},a.state={tags:[],showNTM:!1,showNPM:!1},a.tagService=new W(Object(J.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.project;if(void 0===e||null===e||"undefined"===e)return o.a.createElement(f.a,{fluid:!0},o.a.createElement(z,{handleProjectSubmit:this.handleProjectSubmit,show:this.state.showNPM,handleModalClose:this.handleModalClose}),o.a.createElement(k.a,{style:{justifyContent:"center"}},o.a.createElement(g.a,{sm:6,md:6,lg:6},o.a.createElement(j.a,{style:{margin:"auto",padding:"20px",marginTop:"50px"}},o.a.createElement(S.a,{as:"h4",style:{textAlign:"center",marginTop:5}},"You need to create a project in order to view this page."),o.a.createElement(j.a.Footer,null,o.a.createElement(k.a,null,o.a.createElement(g.a,{xs:6,sm:6,md:6,lg:6},o.a.createElement(F.b,{to:"/"},o.a.createElement(E.a,{size:"sm",variant:"secondary"},"Back to Dashboard"))),o.a.createElement(g.a,{xs:6,sm:6,md:6,lg:6},o.a.createElement(E.a,{size:"sm",variant:"primary",style:{float:"right",backgroundColor:"#db3d44",borderColor:"#db3d44",marginLeft:"5px"}},"Create a Project!"))))))));var t=e.tasks.filter((function(e){return!e.is_completed})),a=e.tasks.filter((function(e){return e.is_completed}));return o.a.createElement(f.a,{fluid:!0},o.a.createElement(oe,{show:this.state.showNTM,closeModal:this.openOrCloseModal,project:this.props.project,handleTaskSubmit:this.props.handleTaskSubmit}),o.a.createElement(k.a,{className:"w-100"},o.a.createElement(g.a,{sm:7},o.a.createElement(q,{projectService:this.props.projectService,project:e,className:"mb-3"}),o.a.createElement($,{authProps:this.props.authProps,className:"mb-3",project:e,openModal:this.openOrCloseModal})),o.a.createElement(g.a,{sm:5},o.a.createElement(te,{key:"length-of-tasks-".concat(t.length),completeTask:this.completeTask,authProps:this.props.authProps,title:"Upcoming Tasks",tasks:t,style:{backgroundColor:"#4d1411",color:"#fff"},openModal:this.openOrCloseModal}),o.a.createElement(te,{key:"length-of-completedTasks-".concat(a.length),authProps:this.props.authProps,title:"Completed Tasks",tasks:a,style:{backgroundColor:"#669900",color:"#fff"}}))))}}]),t}(o.a.Component),se=function e(t){var a=this;Object(s.a)(this,e),this.fetchProjects=function(e){fetch("".concat(a.productionURL,"/users/").concat(e,"/projects"),{headers:{Authorization:a.component.props.authProps.token}}).then((function(e){if(e.status>199&&e.status<300)return e.json();throw e.statusText})).then((function(e){var t=e.map((function(e){return e.tasks})).flat();a.component.setState({projects:e,allTasks:t})})).catch((function(e){return console.log(e)}))},this.postProject=function(e){fetch("".concat(a.productionURL,"/users/").concat(e.userId,"/projects"),{method:"POST",headers:{Authorization:a.component.props.authProps.token,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return a.component.setState({projects:[].concat(Object(V.a)(a.component.state.projects),[e])})}))},this.postTask=function(e){fetch("".concat(a.productionURL,"/projects/").concat(e.projectId,"/tasks"),{method:"POST",headers:{Authorization:a.component.props.authProps.token,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){var t=a.component.state.projects.find((function(t){return t.id===e.project_id})),n=Object.assign({},t);n.tasks=[].concat(Object(V.a)(n.tasks),[e]);var o=a.component.state.projects.map((function(e){return e.id===n.id?n:e}));a.component.setState({projects:o,allTasks:o.map((function(e){return e.tasks})).flat()})}))},this.updateProject=function(e,t){fetch("".concat(a.productionURL,"/projects/").concat(e),{method:"PATCH",headers:{Authorization:a.component.props.authProps.token,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({project:t})}).then((function(e){return e.json()})).then((function(e){return a.component.setState({projects:a.component.state.projects.map((function(t){return t.id===e.id?e:t}))})}))},this.component=t,this.productionURL="https://arcane-sands-50858.herokuapp.com",this.devURL="http://localhost:3000"},le=function e(t){var a=this;Object(s.a)(this,e),this.fetchAllTasksFor=function(e){fetch("".concat(a.workingURL,"/projects/").concat(e,"/tasks"),{headers:{Authorization:a.component.props.authProps.token}}).then((function(e){return e.json()})).then((function(e){return a.component.setState({tasks:e})}))},this.completeTask=function(e){fetch("".concat(a.workingURL,"/tasks/").concat(e),{method:"PATCH",headers:{Authorization:a.component.props.authProps.token,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({task:{is_completed:!0}})}).then((function(e){return e.json()})).then((function(e){var t=a.component.state.projects.find((function(t){return t.id===e.project_id})),n=Object.assign({},t);n.tasks=n.tasks.map((function(t){return t.id===e.id?e:t}));var o=a.component.state.projects.map((function(e){return e.id===n.id?n:e}));a.component.setState({projects:o,allTasks:o.map((function(e){return e.tasks})).flat()})}))},this.component=t,this.workingURL="https://arcane-sands-50858.herokuapp.com"},ie=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).findProjectWith=function(e){return a.state.projects.find((function(t){return t.id===parseInt(e)}))},a.handleTaskSubmit=function(e){return a.projectService.postTask(e)},a.state={token:null,loggedInUserId:null,projects:[],allTasks:[]},a.projectService=new se(Object(J.a)(a)),a.taskService=new le(Object(J.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.projectService.fetchProjects(this.props.authProps.loggedInUserId)}},{key:"render",value:function(){switch(this.props.children){case B:return o.a.createElement(this.props.children,{allTasks:this.state.allTasks,projects:this.state.projects,projectService:this.projectService,taskService:this.taskService,authProps:this.props.authProps});case ce:return o.a.createElement(this.props.children,{projectService:this.projectService,taskService:this.taskService,project:this.findProjectWith(this.props.id),authProps:this.props.authProps,handleTaskSubmit:this.handleTaskSubmit});default:return o.a.createElement(this.props.children,{tasks:this.state.allTasks,taskService:this.taskService,projects:this.state.projects,handleTaskSubmit:this.handleTaskSubmit,authProps:this.props.authProps})}}}]),t}(n.Component),ue=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).authProps=function(){return{token:a.state.token,loggedInUserId:a.state.loggedInUserId}},a.logout=function(){localStorage.clear(),a.setState({token:null,loggedInUserId:null})},a.showSideNavWithMain=function(e){var t=e.location;e.history;return o.a.createElement("main",{style:{marginTop:25}},o.a.createElement(y.d,{location:t},o.a.createElement(y.b,{exact:!0,path:"/",component:function(e){return o.a.createElement(ie,{children:B,authProps:a.authProps()})}}),o.a.createElement(y.b,{exact:!0,path:"/projects/:id",component:function(e){return o.a.createElement(ie,{children:ce,id:Object(y.g)().id,authProps:a.authProps()})}})))},a.state={token:null,loggedInUserId:null,logErrors:[],loading:!1,projects:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){null!==localStorage.token&&""!==localStorage.token&&void 0!==localStorage.token&&"undefined"!==localStorage.token&&this.setState({token:localStorage.token,loggedInUserId:localStorage.userId})}},{key:"render",value:function(){var e=this,t=!!this.props.location.pathname.includes("projects");return o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{collapseOnSelect:!0,variant:"dark",style:{backgroundColor:"#db3d44"}},o.a.createElement(p.a.Brand,{href:"/to-do-app-frontend/"},o.a.createElement("i",{className:"fa fa-fw fa-check-square-o",style:{fontSize:"1em"}}),o.a.createElement("span",{className:"ml-2"},"ToDo App")),o.a.createElement(p.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),this.state.token?o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a.Collapse,{id:"responsive-navbar-nav",className:"justify-content-end",style:{color:"#fff"}},o.a.createElement(h.a,null,t?o.a.createElement(F.b,{to:"/",style:{textDecoration:"none",color:"#fff"}},o.a.createElement("i",{className:"fa fa-fw fa-home",style:{fontSize:"1em"}}),o.a.createElement("strong",null,"Dashboard")):null,o.a.createElement("span",{style:{marginLeft:15},onClick:function(){return e.logout()}},o.a.createElement("strong",null,"Logout"),o.a.createElement("i",{className:"fa fa-fw fa-sign-out",style:{fontSize:"1em",marginLeft:5}}))))):null),null!==this.state.token&&""!==this.state.token&&void 0!==this.state.token&&"undefined"!==this.state.token?this.showSideNavWithMain(this.props):o.a.createElement(w,{parent:this,state:this.state}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(411);c.a.render(o.a.createElement(F.a,{basename:"/"},o.a.createElement(y.b,{render:function(e){var t=e.location,a=e.history;return o.a.createElement(ue,{location:t,history:a})}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[229,1,2]]]);
//# sourceMappingURL=main.501fae0d.chunk.js.map